<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Building AlmaLinux ISO locally | AlmaLinux Wiki</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" type="image/png" href="/images/logo.png">
    <meta name="description" content="AlmaLinux OS Documentation">
    
    <link rel="preload" href="/assets/css/0.styles.5d429379.css" as="style"><link rel="preload" href="/assets/js/app.7857f0f2.js" as="script"><link rel="preload" href="/assets/js/2.592a6313.js" as="script"><link rel="preload" href="/assets/js/1.47e12c88.js" as="script"><link rel="preload" href="/assets/js/47.98c24ad3.js" as="script"><link rel="prefetch" href="/assets/js/10.fde088a2.js"><link rel="prefetch" href="/assets/js/100.dd7da4d8.js"><link rel="prefetch" href="/assets/js/101.20ce7095.js"><link rel="prefetch" href="/assets/js/102.5e07ce71.js"><link rel="prefetch" href="/assets/js/103.468b6bd1.js"><link rel="prefetch" href="/assets/js/104.31f3e622.js"><link rel="prefetch" href="/assets/js/105.c8d1b392.js"><link rel="prefetch" href="/assets/js/106.04395804.js"><link rel="prefetch" href="/assets/js/107.87c28b27.js"><link rel="prefetch" href="/assets/js/108.db0d9c1e.js"><link rel="prefetch" href="/assets/js/109.a5b5c178.js"><link rel="prefetch" href="/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/assets/js/110.4501bde2.js"><link rel="prefetch" href="/assets/js/111.71c6704d.js"><link rel="prefetch" href="/assets/js/112.ca94c220.js"><link rel="prefetch" href="/assets/js/113.04a32358.js"><link rel="prefetch" href="/assets/js/114.df2add4f.js"><link rel="prefetch" href="/assets/js/115.51afa286.js"><link rel="prefetch" href="/assets/js/116.1dd26ce5.js"><link rel="prefetch" href="/assets/js/117.5cc535d7.js"><link rel="prefetch" href="/assets/js/118.a016a4e0.js"><link rel="prefetch" href="/assets/js/119.ddcfc9c9.js"><link rel="prefetch" href="/assets/js/12.27d4f152.js"><link rel="prefetch" href="/assets/js/120.a937c74b.js"><link rel="prefetch" href="/assets/js/121.fb02b181.js"><link rel="prefetch" href="/assets/js/122.f642ac52.js"><link rel="prefetch" href="/assets/js/123.5df6efe8.js"><link rel="prefetch" href="/assets/js/124.ae81be8f.js"><link rel="prefetch" href="/assets/js/125.f4371356.js"><link rel="prefetch" href="/assets/js/126.5c0a274b.js"><link rel="prefetch" href="/assets/js/127.e241072d.js"><link rel="prefetch" href="/assets/js/128.542a8950.js"><link rel="prefetch" href="/assets/js/129.9fc542e7.js"><link rel="prefetch" href="/assets/js/13.419d7748.js"><link rel="prefetch" href="/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/assets/js/16.85253907.js"><link rel="prefetch" href="/assets/js/17.c2838453.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/assets/js/20.0d880388.js"><link rel="prefetch" href="/assets/js/21.33b300c9.js"><link rel="prefetch" href="/assets/js/22.4bdb5a83.js"><link rel="prefetch" href="/assets/js/23.d0336626.js"><link rel="prefetch" href="/assets/js/24.bab2df0f.js"><link rel="prefetch" href="/assets/js/25.82d8beb7.js"><link rel="prefetch" href="/assets/js/26.ab1189f7.js"><link rel="prefetch" href="/assets/js/27.3ceb4755.js"><link rel="prefetch" href="/assets/js/28.d4f1892b.js"><link rel="prefetch" href="/assets/js/29.bd5a6e03.js"><link rel="prefetch" href="/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/assets/js/30.b95a0d33.js"><link rel="prefetch" href="/assets/js/31.f65e8c23.js"><link rel="prefetch" href="/assets/js/32.c0dbd3dd.js"><link rel="prefetch" href="/assets/js/33.488fba41.js"><link rel="prefetch" href="/assets/js/34.84ee8902.js"><link rel="prefetch" href="/assets/js/35.9e9a06e2.js"><link rel="prefetch" href="/assets/js/36.a383ce50.js"><link rel="prefetch" href="/assets/js/37.1f36a1b0.js"><link rel="prefetch" href="/assets/js/38.c85f1868.js"><link rel="prefetch" href="/assets/js/39.c781e46f.js"><link rel="prefetch" href="/assets/js/4.0a92875f.js"><link rel="prefetch" href="/assets/js/40.a5cdff80.js"><link rel="prefetch" href="/assets/js/41.74435274.js"><link rel="prefetch" href="/assets/js/42.78a6e7ea.js"><link rel="prefetch" href="/assets/js/43.2e209c33.js"><link rel="prefetch" href="/assets/js/44.367fcb2a.js"><link rel="prefetch" href="/assets/js/45.e13e6886.js"><link rel="prefetch" href="/assets/js/46.fe75aab9.js"><link rel="prefetch" href="/assets/js/48.068a6be0.js"><link rel="prefetch" href="/assets/js/49.22fac64a.js"><link rel="prefetch" href="/assets/js/5.3b9be48d.js"><link rel="prefetch" href="/assets/js/50.1022d28b.js"><link rel="prefetch" href="/assets/js/51.b6bc53e3.js"><link rel="prefetch" href="/assets/js/52.94a5b054.js"><link rel="prefetch" href="/assets/js/53.22507c19.js"><link rel="prefetch" href="/assets/js/54.51681889.js"><link rel="prefetch" href="/assets/js/55.bfc3e9cd.js"><link rel="prefetch" href="/assets/js/56.dfdc0bc5.js"><link rel="prefetch" href="/assets/js/57.b6957e70.js"><link rel="prefetch" href="/assets/js/58.ba57c242.js"><link rel="prefetch" href="/assets/js/59.83279f1d.js"><link rel="prefetch" href="/assets/js/6.7b96ebf4.js"><link rel="prefetch" href="/assets/js/60.d3fd7fe4.js"><link rel="prefetch" href="/assets/js/61.892dda89.js"><link rel="prefetch" href="/assets/js/62.b74bdfbf.js"><link rel="prefetch" href="/assets/js/63.7cd9adce.js"><link rel="prefetch" href="/assets/js/64.69ad14b4.js"><link rel="prefetch" href="/assets/js/65.5df1a784.js"><link rel="prefetch" href="/assets/js/66.79a6d7a1.js"><link rel="prefetch" href="/assets/js/67.ffbe749b.js"><link rel="prefetch" href="/assets/js/68.da73ca47.js"><link rel="prefetch" href="/assets/js/69.abd36331.js"><link rel="prefetch" href="/assets/js/7.7e58b9c4.js"><link rel="prefetch" href="/assets/js/70.15bdfa2d.js"><link rel="prefetch" href="/assets/js/71.f61a7f49.js"><link rel="prefetch" href="/assets/js/72.a7a7f5a6.js"><link rel="prefetch" href="/assets/js/73.2f768ba4.js"><link rel="prefetch" href="/assets/js/74.2029787d.js"><link rel="prefetch" href="/assets/js/75.8b84d07d.js"><link rel="prefetch" href="/assets/js/76.ccb046f9.js"><link rel="prefetch" href="/assets/js/77.39ebe5ea.js"><link rel="prefetch" href="/assets/js/78.69b38a23.js"><link rel="prefetch" href="/assets/js/79.dcece00c.js"><link rel="prefetch" href="/assets/js/80.464f3780.js"><link rel="prefetch" href="/assets/js/81.b1ecf8d7.js"><link rel="prefetch" href="/assets/js/82.a2b38358.js"><link rel="prefetch" href="/assets/js/83.39198063.js"><link rel="prefetch" href="/assets/js/84.35825856.js"><link rel="prefetch" href="/assets/js/85.84cf25d2.js"><link rel="prefetch" href="/assets/js/86.5834f629.js"><link rel="prefetch" href="/assets/js/87.da310774.js"><link rel="prefetch" href="/assets/js/88.8a59349e.js"><link rel="prefetch" href="/assets/js/89.cf62e4d4.js"><link rel="prefetch" href="/assets/js/90.db3d160e.js"><link rel="prefetch" href="/assets/js/91.25374ce2.js"><link rel="prefetch" href="/assets/js/92.7113dfcf.js"><link rel="prefetch" href="/assets/js/93.b6dd7410.js"><link rel="prefetch" href="/assets/js/94.b7cd4968.js"><link rel="prefetch" href="/assets/js/95.7e0fee0a.js"><link rel="prefetch" href="/assets/js/96.39eb2eea.js"><link rel="prefetch" href="/assets/js/97.73424fea.js"><link rel="prefetch" href="/assets/js/98.73ffe341.js"><link rel="prefetch" href="/assets/js/99.33e61da8.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.2493936b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d429379.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.png" alt="AlmaLinux Wiki" class="logo"> <span class="site-name can-hide">AlmaLinux Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lists.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mailing Lists
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://bugs.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bugs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AlmaLinux/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lists.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mailing Lists
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://bugs.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bugs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AlmaLinux/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">About</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Contribute</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Development</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/building-packages-guide.html" class="sidebar-link">Building Packages Guide</a></li><li><a href="/development/building-almalinux-iso-locally.html" aria-current="page" class="active sidebar-link">Building AlmaLinux ISO locally</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/development/building-almalinux-iso-locally.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/development/building-almalinux-iso-locally.html#get-your-machine-ready" class="sidebar-link">Get Your Machine Ready</a></li><li class="sidebar-sub-header"><a href="/development/building-almalinux-iso-locally.html#setting-up-an-ansible-inventory" class="sidebar-link">Setting Up an Ansible Inventory</a></li><li class="sidebar-sub-header"><a href="/development/building-almalinux-iso-locally.html#deployment" class="sidebar-link">Deployment</a></li><li class="sidebar-sub-header"><a href="/development/building-almalinux-iso-locally.html#building-an-almalinux-iso" class="sidebar-link">Building an AlmaLinux ISO</a></li><li class="sidebar-sub-header"><a href="/development/building-almalinux-iso-locally.html#reporting-issues" class="sidebar-link">Reporting issues</a></li></ul></li><li><a href="/development/Modified-packages.html" class="sidebar-link">Modified packages</a></li><li><a href="/development/Packaging.html" class="sidebar-link">Packaging</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Documentation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Installation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Migration</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Foundation</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="building-almalinux-iso-locally"><a href="#building-almalinux-iso-locally" class="header-anchor">#</a> Building AlmaLinux ISO locally</h1> <p>This guide walks you through the process of building AlmaLinux OS ISO on your local AlmaLinux OS 9 machine.</p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <h3 id="system-requirements"><a href="#system-requirements" class="header-anchor">#</a> System Requirements</h3> <ul><li>AlmaLinux OS 9 machine</li> <li>At least 6 CPU cores are recommended</li> <li>8+ GB RAM</li> <li>300+ GB free storage space needed for the Docker container</li></ul> <h3 id="software-requirements"><a href="#software-requirements" class="header-anchor">#</a> Software Requirements</h3> <p>A basic knowledge of these tools is needed for successful building of an AlmaLinux ISO image:</p> <ul><li>Ansible</li> <li>Docker</li></ul> <h2 id="get-your-machine-ready"><a href="#get-your-machine-ready" class="header-anchor">#</a> Get Your Machine Ready</h2> <p>The following steps describe how to prepare your AlmaLinux 9 machine to build an ISO image.</p> <ul><li>Install Docker CE.</li> <li>Clone this GitHub repository <a href="https://github.com/AlmaLinux/pungi-node-public" target="_blank" rel="noopener noreferrer">pungi-node-public<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and switch to the repository's folder to proceed with the next steps.</li> <li>Install Ansible from the EPEL repository:<div class="language-bash extra-class"><pre class="language-bash"><code>dnf <span class="token function">install</span> epel-release <span class="token comment">#enable the repository</span>
dnf <span class="token function">install</span> ansible <span class="token comment">#install Ansible</span>
</code></pre></div></li></ul> <h2 id="setting-up-an-ansible-inventory"><a href="#setting-up-an-ansible-inventory" class="header-anchor">#</a> Setting Up an Ansible Inventory</h2> <p>Before building AlmaLinux OS ISO images, you need to configure Ansible parameters.</p> <ol><li><p><strong>Navigate to the Inventory Directory</strong>: Change to the cloned repository and navigate to the <code>inventories</code> folder.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/pungi-node-public/inventories
</code></pre></div></li> <li><p><strong>Copy Sample Configuration</strong>: The <code>inventories</code> directory contains a <code>sample</code> folder with default settings. Create a copy of this folder and give it a name of your choice, for example, <code>almalinux</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> sample almalinux
</code></pre></div></li> <li><p><strong>Edit Inventory Settings</strong>: Switch to the newly created directory to modify the Ansible inventory.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/pungi-node-public/inventories/almalinux
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Don't forget to replace the <code>almalinux</code> folder name with your chosen name in the following commands and examples.</p></div></li> <li><p><strong>Add SSH Keys</strong>: Navigate to the <code>inventories/almalinux/group_vars/</code> directory and add your public SSH key to the <code>ssh_public_keys</code> variable in the <code>all.yml</code> file.</p></li> <li><p><strong>Specify Work Directory</strong>: Change to the <code>inventories/almalinux/host_vars</code> directory and edit the <code>&lt;arch&gt;.yml</code> file, where <code>&lt;arch&gt;</code> is your system's architecture (e.g., <code>x86_64.yml</code>).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Ensure that the storage containing your work directory has at least 300 GB of free space, as it will host a local mirror with packages.</p></div> <p>Update the <code>work_directory_path</code> parameter in this file to specify your work directory.</p></li> <li><p><strong>Configure Host Parameters</strong>: Return to the <code>inventories/almalinux</code> directory and edit the <code>hosts.yml</code> file to update the <code>ansible_host</code> and <code>ansible_user</code> parameters. Make sure that the specified user has passwordless sudo access.</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>By default, the Ansible inventory is set to build ISOs for the x86_64 architecture. In case you need to build an ISO for another architecture, make these changes:</p> <ul><li>Replace <em>x86_64</em> with architecture of your choice in the names of files:
<ul><li><strong>x86_64.yml</strong> in the <em>inventories/almalinux/group_vars</em> directory</li> <li><strong>x86_64.yml</strong>, <strong>x86_64-al8.yml</strong>, <strong>x86_64-al9.yml</strong> files in the <em>inventories/almalinux/host_vars</em> directory.</li></ul></li> <li>Replace mentioning of the <em>x86_64</em> with architecture of your choice in the <strong>hosts.yml</strong> in the <em>inventories/almalinux</em> directory</li></ul></div> <h4 id="setting-ansible-to-build-isos-for-several-architectures"><a href="#setting-ansible-to-build-isos-for-several-architectures" class="header-anchor">#</a> Setting Ansible to build ISOs for several architectures</h4> <p>By default, the Ansible inventory is set to build an ISO for one architecture. But it's also possible to build ISOs for several architectures of your choice. To do so, please, make these changes:</p> <ul><li>Make copies of the mentioned below files and rename them according to the required architecture:
<ul><li><strong>x86_64.yml</strong> in the <em>inventories/almalinux/group_vars</em> directory</li> <li><strong>x86_64.yml</strong>, <strong>x86_64-al8.yml</strong>, <strong>x86_64-al9.yml</strong> files in the <em>inventories/almalinux/host_vars</em> directory.</li></ul></li> <li>Add required architecture as parameters to the <strong>hosts.yml</strong> file in the <em>inventories/almalinux</em> directory. Don't forget to fill in the necessary parameters.</li></ul> <h4 id="setting-ansible-to-build-an-iso-for-one-almalinux-os-version"><a href="#setting-ansible-to-build-an-iso-for-one-almalinux-os-version" class="header-anchor">#</a> Setting Ansible to build an ISO for one AlmaLinux OS version</h4> <p>By default, the inventory is set to build ISOs for both AlmaLinux OS 8 and AlmaLinux OS 9 versions. What do we do to build for only one of them? You need to edit and comment items in several configuration files.</p> <ul><li><p>Go the the <em>inventories/almalinux/group_vars/</em> directory and edit the <strong>all.yml</strong> file. Comment one of the <strong>sshd_ports_in_containers</strong> options accordingly to your needs:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>  ---
  sshd_ports_in_containers: <span class="token comment"># lists possible AlmaLinux OS versions for building ISOs</span>
    <span class="token number">8</span>: <span class="token number">6023</span> <span class="token comment"># AlmaLinux OS 8, comment this line if you don't want to build this version</span>
    <span class="token number">9</span>: <span class="token number">6022</span> <span class="token comment"># AlmaLinux OS 9, comment this line if you don't want to build this version</span>
</code></pre></div></li> <li><p>In the same directory edit the <strong>hosts.yml</strong> file. Comment lines with AlmaLinux OS version that you don't need to build an ISO for:</p> <div class="language-bash extra-class"><pre class="language-bash"><code> ---
 os_versions:
   - <span class="token number">8</span>
   - <span class="token number">9</span>
 per_version_absent_repos:
   <span class="token number">8</span>:
     - <span class="token string">&quot;crb&quot;</span>
   <span class="token number">9</span>:
     - <span class="token string">&quot;powertools&quot;</span>
 products:
   - platform: <span class="token string">&quot;AlmaLinux-8&quot;</span>
     name: <span class="token string">&quot;almalinux8-beta&quot;</span>
     version: <span class="token number">8</span>
   - platform: <span class="token string">&quot;AlmaLinux-9&quot;</span>
     name: <span class="token string">&quot;AlmaLinux-9-beta&quot;</span>
     version: <span class="token number">9</span>
</code></pre></div></li> <li><p>Switch to the <em>inventories/almalinux/hosts.yml</em> directory and comment a docker host in the <strong>hosts.yml</strong> and its variables for the architecture you don't need. For example, if you don't want to build an AlmaLinux OS 9 ISO image for the x86_64 architecture, you should comment the <em>x86_64-al9</em> host and its variables <em>ansible_</em>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>  all:
    children:
      hosts:
        hosts:
          x86_64:
      dockers:
        children:
          x86_64-dockers:
      x86_64:
        hosts:
          x86_64:
            ansible_host: <span class="token string">&quot;&lt;IP/domain/ssh alias&gt;&quot;</span>
            ansible_user: <span class="token string">&quot;&lt;a host user&gt;&quot;</span>
        children:
          x86_64-dockers:
            hosts:
              x86_64-al8: <span class="token comment"># comment these lines if you don't need to build ISOs for AlmaLinux OS 8</span>
                ansible_host: <span class="token string">&quot;&lt;IP/domain/ssh alias&gt;&quot;</span>  <span class="token comment"># the same as a host machine</span>
                ansible_user: <span class="token string">&quot;root&quot;</span>
                ansible_port: <span class="token string">&quot;{{ sshd_ports_in_containers[8] }}&quot;</span>
              x86_64-al9: <span class="token comment"># comment these lines if you don't need to build ISOs for AlmaLinux OS 9</span>
                ansible_host: <span class="token string">&quot;&lt;IP/domain/ssh alias&gt;&quot;</span>  <span class="token comment"># the same as a host machine</span>
                ansible_user: <span class="token string">&quot;root&quot;</span>
                ansible_port: <span class="token string">&quot;{{ sshd_ports_in_containers[9] }}&quot;</span>
</code></pre></div></li></ul> <h2 id="deployment"><a href="#deployment" class="header-anchor">#</a> Deployment</h2> <ul><li><p>After you set your Ansible inventory to meet your needs, deploy the Pungi node by running the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ansible-playbook <span class="token parameter variable">-i</span> inventories/almalinux playbooks/build_node_in_docker.yml <span class="token parameter variable">-vv</span> <span class="token parameter variable">-b</span>
</code></pre></div></li> <li><p>After the deployment it's recommended to check that you can connect successfully through SSH to each deployed Docker container.</p></li> <li><p>Now you can sync RPM packages to a local mirror by running the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl start reposync.<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.service
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>In the command replace the <strong>arch</strong> part with the architecture you are building an ISO for. For example, x86_64:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl start reposync.x86_64.service
</code></pre></div></div> <p>Please, note, that the first sync can take up to several hours.</p></li></ul> <h2 id="building-an-almalinux-iso"><a href="#building-an-almalinux-iso" class="header-anchor">#</a> Building an AlmaLinux ISO</h2> <p>When the sync stage is completed you can proceed with building an ISO:</p> <ul><li>Clone GitHub repository <a href="https://github.com/AlmaLinux/pungi-scripts-public" target="_blank" rel="noopener noreferrer">pungi-scripts-public<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> into the previously deployed Docker container.</li> <li>Switch to the <em>pungi-scripts-public/build_scripts</em> directory.</li> <li>To build an ISO run the following command with options that meet your needs:<div class="language- extra-class"><pre class="language-text"><code>python3.9 jenkins.py --working-root-directory &lt;working_root_directory&gt; --arch &lt;arch&gt; --product-name AlmaLinux  --distribution-major-version &lt;major_version&gt;  --distribution-minor-version &lt;minor_version&gt; --beta-suffix &lt;beta_suffix&gt; --sigkeys-fingerprints &lt;fingerprint_1&gt; &lt;fingerprint_2&gt; --git-auth-token &lt;git_auth_token&gt; --git-auth-username &lt;git_auth_username&gt;
</code></pre></div>Command options that you need to fill:
<ul><li><strong>working_root_directory</strong> - specify your work directory as you did in the very beginning in the <em>inventories/almalinux/host_vars/x86_64.yml</em> file</li> <li><strong>arch</strong> - specify what architecture you are building an ISO for, for example, <em>x86_64</em></li> <li><strong>major_version</strong> and <strong>minor_version</strong> - set the numbers that match a full version of the distribution, for example in <strong>8.9</strong> - 8 is a major version, and 9 is a minor version</li> <li><strong>beta_suffix</strong> - this parametr can take two values, <em>-beta</em> and empty string <em>&quot;&quot;</em>. Please, check the <a href="https://git.almalinux.org/almalinux/pungi-almalinux" target="_blank" rel="noopener noreferrer">pungi-almalinux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> repository as it contains branches with the same version and the same beta suffix.</li> <li><strong>fingerprint_1</strong> and <strong>fingerprint_2</strong> - these parameters are fingerprints of keys that are used to sign RPM packages.
<ul><li>For AlmaLinux OS 9:<code>B7BB94F0C9BA6CAA</code> and <code>D36CB86CB86B3716</code></li> <li>For AlmaLinux OS 8: <code>51D6647EC21AD6EA</code> and <code>488FCF7C3ABB34F8</code></li></ul></li> <li><strong>git_auth_token</strong> and <strong>git_auth_username</strong> - parameters for your auth credits that can be found at <a href="https://git.almalinux.org/explore/repos" target="_blank" rel="noopener noreferrer">git.almalinux.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. To generate a token go to the <a href="https://git.almalinux.org/user/settings/applications" target="_blank" rel="noopener noreferrer">user settings/applications<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Please, note, that building an AlmaLinux ISO can take up to several hours, not including the time for syncing RPM packages to a local mirror.</p></div> <h2 id="reporting-issues"><a href="#reporting-issues" class="header-anchor">#</a> Reporting issues</h2> <p>Should you have any issues, please report them to a corresponding project:</p> <ul><li>Setting up an Ansible inventory and deployment - <a href="https://github.com/AlmaLinux/pungi-node-public/issues" target="_blank" rel="noopener noreferrer">pungi-node-public/issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Building an AlmaLinux ISO locally - <a href="https://github.com/AlmaLinux/pungi-scripts-public/issues" target="_blank" rel="noopener noreferrer">pungi-scripts-public/issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/building-packages-guide.html" class="prev">
        Building Packages Guide
      </a></span> <span class="next"><a href="/development/Modified-packages.html">
        Modified packages
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7857f0f2.js" defer></script><script src="/assets/js/2.592a6313.js" defer></script><script src="/assets/js/1.47e12c88.js" defer></script><script src="/assets/js/47.98c24ad3.js" defer></script>
  </body>
</html>
